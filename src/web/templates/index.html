{% extends "base.html" %}

{% block title %}Ladbot - Discord Entertainment Bot{% endblock %}

{% block extra_head %}
<style>
    .hero-section {
        background: var(--gradient-primary);
        color: white;
        padding: 4rem 0;
        text-align: center;
        position: relative;
        overflow: hidden;
        min-height: 60vh;
        display: flex;
        align-items: center;
    }

    .hero-content {
        position: relative;
        z-index: 2;
        width: 100%;
    }

    .hero-background {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1;
        overflow: hidden;
    }

    .hero-background::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
        animation: rotate-slow 20s linear infinite;
    }

    @keyframes rotate-slow {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    .hero-title {
        font-size: 4rem;
        font-weight: 800;
        margin-bottom: 1rem;
        text-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        animation: fade-in-up 1s ease-out;
    }

    .hero-subtitle {
        font-size: 1.5rem;
        opacity: 0.9;
        margin-bottom: 2rem;
        max-width: 700px;
        margin-left: auto;
        margin-right: auto;
        line-height: 1.5;
        animation: fade-in-up 1s ease-out 0.2s both;
    }

    @keyframes fade-in-up {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        margin-bottom: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.3);
        animation: fade-in-up 1s ease-out 0.4s both;
        font-weight: 500;
    }

    .status-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background: #57F287;
        animation: pulse 2s infinite;
        box-shadow: 0 0 10px rgba(87, 242, 135, 0.5);
    }

    .status-dot.offline {
        background: #ED4245;
        box-shadow: 0 0 10px rgba(237, 66, 69, 0.5);
    }

    .cta-buttons {
        display: flex;
        gap: 1.5rem;
        justify-content: center;
        flex-wrap: wrap;
        animation: fade-in-up 1s ease-out 0.6s both;
    }

    .btn-hero {
        padding: 1.25rem 2.5rem;
        font-size: 1.2rem;
        font-weight: 600;
        border-radius: 12px;
        transition: all 0.3s ease;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 0.75rem;
        position: relative;
        overflow: hidden;
    }

    .btn-hero::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
    }

    .btn-hero:hover::before {
        left: 100%;
    }

    .btn-hero-primary {
        background: rgba(255, 255, 255, 0.2);
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.3);
    }

    .btn-hero-primary:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        color: white;
        text-decoration: none;
    }

    .btn-hero-secondary {
        background: transparent;
        color: white;
        border: 2px solid rgba(255, 255, 255, 0.5);
    }

    .btn-hero-secondary:hover {
        background: rgba(255, 255, 255, 0.1);
        transform: translateY(-3px);
        color: white;
        text-decoration: none;
    }

    .stats-section {
        padding: 4rem 0;
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
    }

    .stat-item {
        text-align: center;
        padding: 2rem 1rem;
        transition: transform 0.3s ease;
    }

    .stat-item:hover {
        transform: translateY(-5px);
    }

    .stat-number {
        font-size: 3rem;
        font-weight: 800;
        color: var(--discord-primary);
        display: block;
        margin-bottom: 0.5rem;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    .stat-label {
        color: var(--text-secondary);
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 1px;
        font-size: 0.9rem;
    }

    .features-section {
        padding: 5rem 0;
        background: var(--bg-primary);
    }

    .section-header {
        text-align: center;
        margin-bottom: 4rem;
    }

    .section-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: var(--text-primary);
    }

    .section-subtitle {
        font-size: 1.25rem;
        color: var(--text-secondary);
        max-width: 600px;
        margin: 0 auto;
    }

    .feature-card {
        background: white;
        border-radius: 20px;
        padding: 2.5rem;
        text-align: center;
        box-shadow: var(--shadow-md);
        transition: var(--transition-normal);
        height: 100%;
        border: 1px solid rgba(0, 0, 0, 0.05);
        position: relative;
        overflow: hidden;
    }

    .feature-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--gradient-primary);
    }

    .feature-card:hover {
        transform: translateY(-10px);
        box-shadow: var(--shadow-lg);
    }

    .feature-icon {
        width: 80px;
        height: 80px;
        background: var(--gradient-primary);
        border-radius: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        color: white;
        font-size: 2rem;
        transition: transform 0.3s ease;
    }

    .feature-card:hover .feature-icon {
        transform: scale(1.1) rotate(5deg);
    }

    .feature-title {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 1rem;
        color: var(--text-primary);
    }

    .feature-description {
        color: var(--text-secondary);
        line-height: 1.6;
    }

    .commands-section {
        padding: 5rem 0;
        background: linear-gradient(135deg, rgba(88, 101, 242, 0.05) 0%, rgba(118, 75, 162, 0.05) 100%);
    }

    .command-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1rem;
        box-shadow: var(--shadow-sm);
        transition: var(--transition-normal);
        border-left: 4px solid var(--discord-primary);
    }

    .command-card:hover {
        transform: translateX(5px);
        box-shadow: var(--shadow-md);
    }

    .command-name {
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        background: rgba(88, 101, 242, 0.1);
        padding: 0.25rem 0.5rem;
        border-radius: 6px;
        font-weight: 600;
        color: var(--discord-primary);
        font-size: 0.9rem;
    }

    .command-category {
        display: inline-block;
        background: rgba(0, 0, 0, 0.1);
        color: var(--text-muted);
        padding: 0.2rem 0.5rem;
        border-radius: 4px;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        margin-left: 0.5rem;
    }

    .cta-section {
        padding: 5rem 0;
        background: var(--gradient-primary);
        color: white;
        text-align: center;
    }

    .cta-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
    }

    .cta-subtitle {
        font-size: 1.25rem;
        opacity: 0.9;
        margin-bottom: 2rem;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    .cta-features {
        display: flex;
        justify-content: center;
        gap: 2rem;
        margin-top: 2rem;
        flex-wrap: wrap;
    }

    .cta-feature {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        font-size: 0.9rem;
        opacity: 0.8;
    }

    @media (max-width: 768px) {
        .hero-title {
            font-size: 2.5rem;
        }

        .hero-subtitle {
            font-size: 1.25rem;
        }

        .cta-buttons {
            flex-direction: column;
            align-items: center;
        }

        .btn-hero {
            width: 100%;
            max-width: 300px;
            justify-content: center;
        }

        .stat-number {
            font-size: 2.5rem;
        }

        .section-title {
            font-size: 2rem;
        }

        .feature-card {
            padding: 2rem;
        }

        .cta-features {
            flex-direction: column;
            align-items: center;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
    <div class="hero-background"></div>
    <div class="container">
        <div class="hero-content">
            <h1 class="hero-title">
                <i class="fas fa-robot"></i> Ladbot
            </h1>
            <p class="hero-subtitle">
                Your friendly Discord entertainment bot with 55+ commands, interactive games,
                and powerful admin tools to enhance your server experience
            </p>

            {% if bot and bot.online %}
            <div class="status-badge">
                <div class="status-dot"></div>
                <span>Bot Online • Serving {{ "{:,}".format(stats.guilds or 0) }} servers</span>
            </div>
            {% else %}
            <div class="status-badge">
                <div class="status-dot offline"></div>
                <span>Bot Status Unknown</span>
            </div>
            {% endif %}

            <div class="cta-buttons">
                {% if oauth_enabled %}
                    {% if 'user_id' in session %}
                    <a href="{{ url_for('dashboard') }}" class="btn-hero btn-hero-primary">
                        <i class="fas fa-tachometer-alt"></i>
                        Open Dashboard
                    </a>
                    {% else %}
                    <a href="{{ url_for('login') }}" class="btn-hero btn-hero-primary">
                        <i class="fab fa-discord"></i>
                        Login with Discord
                    </a>
                    {% endif %}
                {% endif %}

                <a href="{{ url_for('about') }}" class="btn-hero btn-hero-secondary">
                    <i class="fas fa-info-circle"></i>
                    Learn More
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Stats Section -->
{% if stats %}
<section class="stats-section">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 col-md-6">
                <div class="stat-item">
                    <span class="stat-number" data-count="{{ stats.guilds or 0 }}">{{ "{:,}".format(stats.guilds or 0) }}</span>
                    <span class="stat-label">Discord Servers</span>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-item">
                    <span class="stat-number" data-count="{{ stats.users or 0 }}">{{ "{:,}".format(stats.users or 0) }}</span>
                    <span class="stat-label">Users Served</span>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-item">
                    <span class="stat-number">{{ stats.commands or 55 }}+</span>
                    <span class="stat-label">Commands</span>
                </div>
            </div>
            <div class="col-lg-3 col-md-6">
                <div class="stat-item">
                    <span class="stat-number">24/7</span>
                    <span class="stat-label">Uptime</span>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Features Section -->
<section class="features-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Powerful Features</h2>
            <p class="section-subtitle">
                Everything you need for Discord entertainment and server management
            </p>
        </div>

        <div class="row g-4">
            <div class="col-lg-4 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h3 class="feature-title">Entertainment & Games</h3>
                    <p class="feature-description">
                        Interactive games, jokes, magic 8-ball, ASCII art, and more fun commands
                        to keep your Discord server engaged and entertained.
                    </p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <h3 class="feature-title">Weather & Information</h3>
                    <p class="feature-description">
                        Get real-time weather updates, cryptocurrency prices, Reddit content,
                        and Bible verses with easy-to-use commands.
                    </p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-shield-alt"></i>
                    </div>
                    <h3 class="feature-title">Admin & Moderation</h3>
                    <p class="feature-description">
                        Powerful moderation tools, auto-responses, server settings management,
                        and comprehensive admin controls for your Discord server.
                    </p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="feature-title">Analytics Dashboard</h3>
                    <p class="feature-description">
                        Real-time statistics, command usage analytics, performance monitoring,
                        and detailed insights about your bot's activity.
                    </p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <h3 class="feature-title">Customizable Settings</h3>
                    <p class="feature-description">
                        Configure bot behavior per server, enable/disable features,
                        set custom prefixes, and tailor the experience to your needs.
                    </p>
                </div>
            </div>

            <div class="col-lg-4 col-md-6">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3 class="feature-title">Mobile-Friendly</h3>
                    <p class="feature-description">
                        Access the web dashboard from any device with a responsive design
                        that works perfectly on desktop, tablet, and mobile.
                    </p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Commands Section -->
{% if featured_commands %}
<section class="commands-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">Popular Commands</h2>
            <p class="section-subtitle">Try these fan-favorite commands in your Discord server</p>
        </div>

        <div class="row">
            {% for command in featured_commands %}
            <div class="col-lg-6 col-md-12">
                <div class="command-card">
                    <div class="d-flex align-items-center justify-content-between">
                        <div>
                            <span class="command-name">{{ settings.prefix if settings else 'l.' }}{{ command.name }}</span>
                            <span class="command-category">{{ command.category }}</span>
                        </div>
                        <i class="fas fa-terminal text-primary"></i>
                    </div>
                    <p class="mt-2 mb-0 text-muted">{{ command.description }}</p>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="text-center mt-4">
            <p class="text-muted">
                And {{ (stats.commands or 55) - (featured_commands|length if featured_commands else 6) }}+ more commands!
                Use <code class="command-name">{{ settings.prefix if settings else 'l.' }}help</code> to see them all.
            </p>
        </div>
    </div>
</section>
{% endif %}

<!-- Call to Action Section -->
<section class="cta-section">
    <div class="container">
        <h2 class="cta-title">Ready to Get Started?</h2>
        <p class="cta-subtitle">
            Join thousands of Discord servers already using Ladbot for entertainment and management
        </p>

        {% if oauth_enabled %}
            {% if 'user_id' not in session %}
            <a href="{{ url_for('login') }}" class="btn-hero btn-hero-primary">
                <i class="fab fa-discord"></i> Access Dashboard
            </a>
            {% else %}
            <a href="{{ url_for('dashboard') }}" class="btn-hero btn-hero-primary">
                <i class="fas fa-tachometer-alt"></i> Open Dashboard
            </a>
            {% endif %}
        {% endif %}

        <div class="cta-features">
            <div class="cta-feature">
                <i class="fas fa-check"></i>
                <span>Free to use</span>
            </div>
            <div class="cta-feature">
                <i class="fas fa-shield-alt"></i>
                <span>Privacy focused</span>
            </div>
            <div class="cta-feature">
                <i class="fas fa-clock"></i>
                <span>24/7 uptime</span>
            </div>
            <div class="cta-feature">
                <i class="fas fa-code"></i>
                <span>Open source</span>
            </div>
        </div>
    </div>
</section>

<script>
// Animate stats numbers on scroll
function animateStats() {
    const statNumbers = document.querySelectorAll('.stat-number[data-count]');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                const target = entry.target;
                const count = parseInt(target.dataset.count);
                const duration = 2000; // 2 seconds
                const increment = count / (duration / 16); // 60 FPS
                let current = 0;

                const timer = setInterval(() => {
                    current += increment;
                    if (current >= count) {
                        current = count;
                        clearInterval(timer);
                    }
                    target.textContent = Math.floor(current).toLocaleString();
                }, 16);

                observer.unobserve(target);
            }
        });
    }, { threshold: 0.5 });

    statNumbers.forEach(stat => observer.observe(stat));
}

// Check bot status and update indicator
async function updateBotStatus() {
    try {
        const response = await fetch('/api/bot/health');
        const data = await response.json();

        const statusBadge = document.querySelector('.status-badge');
        const statusDot = document.querySelector('.status-dot');
        const statusText = statusBadge.querySelector('span');

        if (data.status === 'healthy') {
            statusDot.classList.remove('offline');
            statusText.textContent = `Bot Online • ${data.guilds || 0} servers`;
        } else {
            statusDot.classList.add('offline');
            statusText.textContent = 'Bot Offline';
        }
    } catch (error) {
        console.debug('Bot status check failed:', error);
    }
}

// Initialize page
document.addEventListener('DOMContentLoaded', function() {
    // Animate stats
    animateStats();

    // Update bot status
    updateBotStatus();

    // Add smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Add parallax effect to hero background
    window.addEventListener('scroll', () => {
        const scrolled = window.pageYOffset;
        const heroBackground = document.querySelector('.hero-background');
        if (heroBackground) {
            heroBackground.style.transform = `translateY(${scrolled * 0.5}px)`;
        }
    });
});

// Refresh bot status every 30 seconds
setInterval(updateBotStatus, 30000);
</script>
{% endblock %}